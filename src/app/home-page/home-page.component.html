<div class="home-container">
  <div class="top-section">
    <div class="current-weather-card">
      <h2>Current Weather</h2>
      
      <ng-container *ngIf="loading">
        <div class="loading-spinner">
          Loading weather data...
        </div>
      </ng-container>
      
      <ng-container *ngIf="error">
        <div class="error-message">
          {{ error }}
        </div>
      </ng-container>
      
      <ng-container *ngIf="currentWeather && !loading && !error">
        <div class="weather-content">
          <div class="location-info">
            <h3>{{ currentWeather.city }}</h3>
          </div>
          
          <div class="weather-details">
            <div class="temp-icon-container">
              <div class="temperature">
                {{ currentWeather.temperature | number:'1.0-0' }}°C
              </div>
              <div class="weather-icon">
                {{ currentWeather.weatherIcon }}
              </div>
            </div>
            
            <div class="weather-description">
              {{ currentWeather.description }}
            </div>
          </div>
          
          <div class="weather-metrics">
            <div class="metric">
              <span class="metric-label">Humidity</span>
              <span class="metric-value">{{ currentWeather.humidity }}%</span>
            </div>
            
            <div class="metric">
              <span class="metric-label">Wind</span>
              <span class="metric-value">{{ currentWeather.windSpeed }} km/h</span>
            </div>
            
            <div class="metric">
              <span class="metric-label">Precipitation</span>
              <span class="metric-value">{{ currentWeather.precipitation }}%</span>
            </div>
            <div class="metric">
              <span class="metric-label">UV Index</span>
              <span class="metric-value">{{ currentWeather.uvIndex }}</span>
            </div>
          </div>
        </div>
      </ng-container>
    </div>
    
    <div class="favorite-cities-card">
      <h2>Favorite Cities</h2>
      <div class="city-list">
        <div class="city-item" (click)="selectCity('Hyderabad')">Hyderabad</div>
        <div class="city-item" (click)="selectCity('Delhi')">Delhi</div>
        <div class="city-item" (click)="selectCity('Chennai')">Chennai</div>
      </div>
    </div>
  </div>
  
  <div class="bottom-section">
    <div class="hourly-forecast-card">
      <h2>Hourly Forecast</h2>
      
      <ng-container *ngIf="forecastLoading">
        <div class="loading-spinner">
          Loading forecast data...
        </div>
      </ng-container>
      
      <ng-container *ngIf="forecastError">
        <div class="error-message">
          {{ forecastError }}
        </div>
      </ng-container>
      
      <ng-container *ngIf="hourlyForecast.length && !forecastLoading && !forecastError">
        <div class="forecast-tabs">
          <div class="tab" 
               [ngClass]="{'active': activeTab === 'temperature'}"
               (click)="setActiveTab('temperature')">
            Temperature
          </div>
          <div class="tab"
               [ngClass]="{'active': activeTab === 'precipitation'}"
               (click)="setActiveTab('precipitation')">
            Precipitation
          </div>
          <div class="tab"
               [ngClass]="{'active': activeTab === 'wind'}"
               (click)="setActiveTab('wind')">
            Wind
          </div>
        </div>
        
        <div class="forecast-chart">
          <div class="chart-container">
            <!-- Y-axis labels can be added here if needed -->
            <div class="chart-grid">
              <div class="chart-bars">
                <div class="chart-bar" *ngFor="let item of hourlyForecast.slice(0, 8)">
                  <div class="bar-value">
                    {{ getValue(item) | number:'1.0-0' }}
                    <ng-container [ngSwitch]="activeTab">
                      <span *ngSwitchCase="'temperature'">°C</span>
                      <span *ngSwitchCase="'precipitation'">%</span>
                      <span *ngSwitchCase="'wind'">km/h</span>
                    </ng-container>
                  </div>
                  <div class="bar-fill"
                       [style.height.%]="getHeightPercentage(item)"></div>
                  <div class="bar-time">{{ formatTime(item.time) }}</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </ng-container>
    </div>
  </div>
</div>
